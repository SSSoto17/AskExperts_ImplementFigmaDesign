---

import type { ImageMetadata } from 'astro';
import { Image } from "astro:assets";

import Tagline from "../Tagline.astro";
import ContactDetail from '../ContactDetail.astro';

import contactImg01 from "../../assets/images/contact-1.jpg"
import contactImg02 from "../../assets/images/contact-2.jpg"
import contactImg03 from "../../assets/images/contact-3.jpg"

const contactinfo = [
    {
        title: "Call Today",
        details: "+1 800 100 900",
        icon: "contact"
    },
    {
        title: "Monday To Friday",
        details: "9AM - 5PM",
        icon: "hours"
    },
    {
        title: "USA Office",
        details: "195 Devonshire St Boston, MA 02110",
        icon: "address"
    }
];

// const imagePath = "/src/assets/contact-1.jpg";

// const { imagePath, altText } = Astro.props;
// const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/*.{jpeg,jpg,png,gif}');
// if (!images[imagePath]) throw new Error(`"${imagePath}" does not exist in glob: "src/assets/*.{jpeg,jpg,png,gif}"`);

---

<section>
    <article>
        <Tagline>Process</Tagline>
        <header class="flow-space">
            <h2 class="heading-2">Contact Us. Itâ€™s Easy.</h2>
            <p>Leverage agile frameworks to provide a robust synopsis for high level overviews. Iterative approaches to corporate strategy foster collaborative.</p>
        </header>
        <ul role="list" class="flow-space">
            {contactinfo.map(info => {
                return <ContactDetail data={info} />
            })}
        </ul>
        <figure>
            <Image src={contactImg01} alt="" />
            <Image src={contactImg02} alt="" />
            <Image src={contactImg03} alt="" />
        </figure>
    </article>
</section>

<style>

    section {
        padding: var(--space-2xl) 0;

        article {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 0 var(--space-l);

            header {
                max-width: 26rem;
                grid-column: 1;
                display: grid;
                place-content: start;
            }

            ul {--flow-space: var(--space-m)}

            figure {
                padding-inline-start: var(--space-m);
                padding-block-end: var(--space-xs);
                grid-column: 2;
                grid-row: 2 / 4;
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: var(--space-2xs);
                position: relative;
                place-self: end;

                > img {
                    border-radius: var(--crn-img);
                    object-fit: cover;

                    &:first-child {
                        grid-column: 1;
                        grid-row: 1 / 3;
                    }
                }

                &::before {
                --square-count: 12;
                --square-size: 1.35rem;
                
                --_square-size: var(--square-size, 1rem);
                --_square-half: calc(var(--square-size) / 2);
                --_square-sum: calc(var(--square-count) * var(--square-size));
                content: "";
                z-index: -2;
                position: absolute;
                top: -2rem;
                right: -3rem;
                inline-size: calc( round( var(--_square-sum), var(--_square-size) ) - var(--_square-half) );
                aspect-ratio: 1;
                background: linear-gradient(135deg, #BE965D, #976F40, #C99B61, #F0BE7B , #FFCB85, #EEBC79, #C0935B, #976F40) 0 0 / 100% 100%;
                mask:
                var(--square-pattern) 0 0 / var(--_square-size) var(--_square-size),
                var(--square-pattern) var(--_square-half) var(--_square-half) / var(--_square-size) var(--_square-size);
                }

                &::after {
                content: "";
                position: absolute;
                width: 15rem;
                aspect-ratio: 2 / 1;
                bottom:  0;
                left: 0;
                background-color: var(--clr-primary-02);
                border-radius: var(--crn-img);
                z-index: -1;
            }          

            }
        }
    }

</style>